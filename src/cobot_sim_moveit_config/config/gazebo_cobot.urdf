<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/ros/test_ws/src/cobot_sim/urdf/cobot.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="cobot">
    <!--<xacro:include filename="$(find cobot_simulation)/urdf/sensors/kinetic_rgb.urdf.xacro"/>-->
    <!-- Fix the cobot to the world-->
    <link name="world" />
    <link name="base_link">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.025" />
            <mass value="1" />
            <inertia ixx="0.01625" ixy="0" ixz="0" iyy="0.01625" iyz="0" izz="0.005" />
        </inertial>
        <visual>
            <geometry>
                <cylinder length="0.05" radius="0.1" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.025" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="0.05" radius="0.1" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.025" />
        </collision>
    </link>
    <joint name="fixed" type="fixed">
        <parent link="world" />
        <child link="base_link" />
    </joint>
    <link name="link1">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.132" />
            <mass value="1.5" />
            <inertia ixx="0.054147" ixy="0" ixz="0" iyy="0.054147" iyz="0" izz="0.001875" />
        </inertial>
        <visual>
            <geometry>
                <cylinder length="0.264" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.132" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="0.264" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.132" />
        </collision>
    </link>
    <joint name="base_link__link1" type="revolute">
        <parent link="base_link" />
        <child link="link1" />
        <axis xyz="0 0 1" />
        <limit effort="1000" lower="-3.14" upper="3.14" velocity="0.5" />
        <origin rpy="0 0 0" xyz="0 0 0.05" />
    </joint>
    <link name="link2">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.425" />
            <mass value="2" />
            <inertia ixx="0.4816" ixy="0" ixz="0" iyy="0" iyz="0" izz="0.4816" />
        </inertial>
        <visual>
            <geometry>
                <cylinder length="0.85" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.425" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="0.85" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.425" />
        </collision>
    </link>
    <joint name="link1__link2" type="revolute">
        <parent link="link1" />
        <child link="link2" />
        <axis xyz="0 1 0" />
        <limit effort="1000" lower="-3.14" upper="3.14" velocity="0.5" />
        <origin rpy="0 0 0" xyz="0 0.1 0.214" />
    </joint>
    <link name="link3">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.340" />
            <mass value="2" />
            <inertia ixx="0.4816" ixy="0" ixz="0" iyy="0" iyz="0" izz="0.4816" />
        </inertial>
        <visual>
            <geometry>
                <cylinder length="0.68" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.340" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="0.68" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.340" />
        </collision>
    </link>
    <joint name="link2__link3" type="revolute">
        <parent link="link2" />
        <child link="link3" />
        <axis xyz="0 1 0" />
        <limit effort="1000" lower="-3.14" upper="3.14" velocity="0.5" />
        <origin rpy="0 0 0" xyz="0 -0.1 0.8" />
    </joint>
    <link name="link4">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.065" />
            <mass value="1" />
            <inertia ixx="0.00565" ixy="0" ixz="0" iyy="0" iyz="0" izz="0.00565" />
        </inertial>
        <visual>
            <geometry>
                <cylinder length="0.13" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.065" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="0.13" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.065" />
        </collision>
    </link>
    <joint name="link3__link4" type="revolute">
        <parent link="link3" />
        <child link="link4" />
        <axis xyz="0 1 0" />
        <limit effort="1000" lower="-3.14" upper="3.14" velocity="0.5" />
        <origin rpy="0 0 0" xyz="0 0.1 0.630" />
    </joint>
    <link name="link5">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.035" />
            <mass value="2" />
            <inertia ixx="0.4816" ixy="0" ixz="0" iyy="0" iyz="0" izz="0.4816" />
        </inertial>
        <visual>
            <geometry>
                <cylinder length="0.17" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.035" />
        </visual>
        <collision>
            <geometry>
                <cylinder length="0.17" radius="0.05" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.035" />
        </collision>
    </link>
    <joint name="link4__link5" type="revolute">
        <parent link="link4" />
        <child link="link5" />
        <axis xyz="1 0 0" />
        <limit effort="1000" lower="-3.14" upper="3.14" velocity="0.5" />
        <origin rpy="0 1.57 0" xyz="0 0.0 0.180" />
    </joint>
    <!-- Build the TCP or end effector-->
    <link name="gripper_connector">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.0125" />
            <mass value="1" />
            <inertia ixx="0.00195" ixy="0" ixz="0" iyy="0.00195" iyz="0" izz="0.00015" />
        </inertial>
        <visual>
            <geometry>
                <box size="0.03 0.150 0.03" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.0125" />
        </visual>
        <collision>
            <geometry>
                <box size="0.03 0.150 0.03" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.0125" />
        </collision>
    </link>
    <joint name="gripper_joint" type="revolute">
        <parent link="link5" />
        <child link="gripper_connector" />
        <axis xyz="0 0 1" />
        <limit effort="200" lower="-3.14" upper="3.14" velocity="0.5" />
        <origin rpy="0 0 0" xyz="0 0.0 0.125" />
        <dynamics damping="1" friction="10" />
    </joint>
    <transmission name="trans_gripper_joint">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="gripper_joint">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_gripper_joint">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <link name="gripper_right">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.05" />
            <mass value="0.5" />
            <inertia ixx="0.00042" ixy="0" ixz="0" iyy="0.00042" iyz="0" izz="8.3e-06" />
        </inertial>
        <visual>
            <geometry>
                <box size="0.01 0.01 0.1" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.05" />
        </visual>
        <collision>
            <geometry>
                <box size="0.01 0.01 0.1" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.05" />
        </collision>
    </link>
    <joint name="gripper_right_joint" type="prismatic">
        <parent link="gripper_connector" />
        <child link="gripper_right" />
        <axis xyz="0 1 0" />
        <limit effort="200" lower="0" upper="0.055" velocity="0.5" />
        <origin rpy="0 0 0" xyz="0 -0.065 0.03" />
        <dynamics damping="1" friction="10" />
    </joint>
    <transmission name="trans_gripper_right_joint">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="gripper_right_joint">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_gripper_right_joint">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <link name="gripper_left">
        <inertial>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.05" />
            <mass value="0.5" />
            <inertia ixx="0.00042" ixy="0" ixz="0" iyy="0.00042" iyz="0" izz="8.3e-06" />
        </inertial>
        <visual>
            <geometry>
                <box size="0.01 0.01 0.1" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.05" />
        </visual>
        <collision>
            <geometry>
                <box size="0.01 0.01 0.1" />
            </geometry>
            <origin rpy="0 0 0" xyz="0.0 0.0 0.05" />
        </collision>
    </link>
    <joint name="gripper_left_joint" type="prismatic">
        <parent link="gripper_connector" />
        <child link="gripper_left" />
        <axis xyz="0 1 0" />
        <limit effort="200" lower="-0.055" upper="0" velocity="0.5" />
        <origin rpy="0 0 0" xyz="0 0.065 0.03" />
        <dynamics damping="1" friction="2" />
        <mimic joint="gripper_right_joint" multiplier="-1.0" offset="0" />
    </joint>
    <transmission name="trans_gripper_left_joint">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="gripper_left_joint">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_gripper_left_joint">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <!-- ros control plugin with mimic-->
    <gazebo>
        <plugin filename="libroboticsgroup_upatras_gazebo_mimic_joint_plugin.so" name="gripper_left_joint_mimic_joint_plugin">
            <joint>gripper_right_joint</joint>
            <mimicJoint>gripper_left_joint</mimicJoint>
            <multiplier>-1.0</multiplier>
            <offset>0</offset>
            <sensitiveness>0.0</sensitiveness>
            <maxEffort>200</maxEffort>
        </plugin>
        <plugin name="gazebo_ros_control">
            <robotNamespace>/</robotNamespace>
        </plugin>
    </gazebo>
    <gazebo>
        <plugin filename="libgazebo_grasp_fix.so" name="gazebo_grasp_fix">
            <arm>
                <arm_name>cobot</arm_name>
                <palm_link>gripper_connector</palm_link>
                <gripper_link>gripper_right</gripper_link>
                <gripper_link>gripper_left</gripper_link>
            </arm>
            <forces_angle_tolerance>100</forces_angle_tolerance>
            <update_rate>10</update_rate>
            <grip_count_threshold>3</grip_count_threshold>
            <max_grip_count>10</max_grip_count>
            <release_tolerance>0.001</release_tolerance>
            <disable_collision_on_attach>false</disable_collision_on_attach>
            <contact_topic>__default_topic__</contact_topic>
        </plugin>
    </gazebo>
    <!-- put transmission in each joint-->
    <transmission name="trans_base_link__link1">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="base_link__link1">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_base_link__link1">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <transmission name="trans_link1__link2">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="link1__link2">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_link1__link2">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <transmission name="trans_link2__link3">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="link2__link3">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_link2__link3">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <transmission name="trans_link3__link4">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="link3__link4">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_link3__link4">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <transmission name="trans_link4__link5">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="link4__link5">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor_link4__link5">
            <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <!-- Define RGB-D sensor  
    <xacro:kinetic_rgb name="rgbd_camera" parent="base">
        <origin xyz="0.1 0.0 2.3" rpy="${0.0 * deg_to_rad} ${70.0 * deg_to_rad} ${0.0 * deg_to_rad}"/>
        <origin xyz="0 0 0" rpy="${-90 * deg_to_rad} ${0 * deg_to_rad} ${-90 * deg_to_rad}" />
    </xacro:kinetic_rgb>
    -->
    <!-- Gazebo plugin -->
    <gazebo>
        <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
            <robotNamespace>/cobot</robotNamespace>
        </plugin>
    </gazebo>
</robot>

